<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.springboot.dao.TrainDao">

    <select id="count" resultType="java.lang.Integer">
        SELECT count(*) FROM sys_train
        <where>
            <if test="trainId != null and trainId != ''">
                and trainId like concat('%',#{trainId},'%')
            </if>
            <if test="departure != null and departure != ''">
                and departure like concat('%',#{departure},'%')
            </if>
            <if test="terminal != null and terminal != ''">
                and terminal like concat('%',#{terminal},'%')
            </if>
            <if test="leaveTime != null and leaveTime != ''">
                and leaveTime like concat('%',#{leaveTime},'%')
            </if>
            <if test="arriveTime != null and arriveTime != ''">
                and arriveTime like concat('%',#{arriveTime},'%')
            </if>
        </where>
    </select>
    <select id="findPage" resultType="com.example.springboot.entity.Train">
        SELECT * FROM sys_train
        <where>
            <if test="trainId != null and trainId != ''">
                and trainId like concat('%',#{trainId},'%')
            </if>
            <if test="departure != null and departure != ''">
                and departure like concat('%',#{departure},'%')
            </if>
            <if test="terminal != null and terminal != ''">
                and terminal like concat('%',#{terminal},'%')
            </if>
            <if test="leaveTime != null and leaveTime != ''">
                and leaveTime like concat('%',#{leaveTime},'%')
            </if>
            <if test="arriveTime != null and arriveTime != ''">
                and arriveTime like concat('%',#{arriveTime},'%')
            </if>
        </where>
        LIMIT #{pageNumber}, #{pageSize}
    </select>
    <select id="findAll" resultType="com.example.springboot.entity.Train">
        SELECT * FROM sys_train
    </select>
    <select id="getMessage" resultType="com.example.springboot.entity.TrainMsg">
        SELECT firstTicket,firstCost,secondTicket,secondCost FROM sys_train WHERE trainId = #{trainId} AND departure = #{departure} AND terminal = #{terminal}
    </select>
</mapper>